Preheat the oven to 325 degrees F (163 degrees C). Line the bottoms of three 9-inch cake pans with parchment paper. Spray the sides with cooking spray.

Step 2
Sift all-purpose flour, cake flour, cocoa powder, baking soda, and salt together in a medium bowl.

Step 3
Microwave buttermilk just until warm, about 30 seconds. Stir in vanilla extract.

Step 4
Beat brown sugar and butter together in a bowl until light and fluffy, about 5 minutes. Add eggs one at a time, mixing thoroughly before each addition. Blend in the flour mixture and buttermilk in 3 additions until fully combined. Let mixer run on low for 5 minutes. Distribute the cake batter between the prepared cake pans.

Step 5
Bake in the preheated oven until a toothpick inserted into the center the cakes comes out clean, 30 to 35 minutes.

Step 6
Let cool for 15 minutes in the pans. Turn cakes out and let cool completely on a wire rack, at least 30 minutes. Cover with plastic wrap and chill for at least 1 hour or overnight.

Step 7
Meanwhile, whisk sugar, milk, flour, and salt together in a medium saucepan for the frosting. Cook over medium heat, whisking constantly, until the mixture thickens and begins to simmer, about 10 minutes. Pour into a medium bowl and chill for about 45 minutes, stirring occasionally.

Step 8
Beat butter until smooth, about 5 minutes. Slowly add the milk and flour mixture, 1/4 cup at a time, beating in between each addition and scraping the sides of the bowl occasionally. Mix in the vanilla extract.

Step 9
Level the cake layers before assembling the cake. Scoop about 2/3 cup of frosting onto the first layer and spread into an even layer. Repeat with the second and third cake layers. Frost the outsides of the cake with thin layer of frosting to catch any crumbs and chill for 20 minutes.

Step 10
Finish frosting the cake with remaining frosting. Cut and serve.